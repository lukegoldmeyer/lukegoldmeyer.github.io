---
layout: compress
swcache: true
---

[
  {% for post in site.posts %}
  {
    "title": {{ post.title | jsonify }},
    "url": {{ post.url | relative_url | jsonify }},
    "categories": {{ post.categories | join: ', ' | jsonify }},
    "tags": {{ post.tags | join: ', ' | jsonify }},
    "date": {{ post.date | jsonify }},
    {% capture content -%}{% include post-summary.html full_text=true %}{%- endcapture -%}
    {%- comment -%} Collect all image alt text {%- endcomment -%}
    {%- assign alt_texts = '' | split: '' -%}
    {%- if post.image.alt -%}
      {%- assign alt_texts = alt_texts | push: post.image.alt -%}
    {%- endif -%}
    {%- if post.thumbnail_image.alt -%}
      {%- assign alt_texts = alt_texts | push: post.thumbnail_image.alt -%}
    {%- endif -%}
    {%- if alt_texts.size > 0 -%}
      {%- assign alt_text_string = alt_texts | join: ' ' -%}
      {%- assign content = content | append: ' ' | append: alt_text_string -%}
    {%- endif -%}
    "content": {{ content | jsonify }}
  }{% unless forloop.last %},{% endunless %}
  {% endfor %}
]
